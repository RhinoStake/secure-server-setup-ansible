---
- name: Stop daemon
  become: true
  ansible.builtin.systemd:
    name: "{{ daemon }}"
    state: stopped
  listen: "restart node"

- name: Remove wasm
  ansible.builtin.file:
    path: "{{ item }}"
    state: absent
  with_items:
    - "{{ user_dir }}/{{ folder }}/wasm/wasm/cache"
    - "{{ user_dir }}/{{ folder }}/data/wasm/wasm/cache"
  listen: "restart node"

- name: Restart daemon
  become: true
  ansible.builtin.systemd:
    name: "{{ daemon }}"
    state: started
  listen: "restart node"
